![look0][look0]
![look1][look1]
![look2][look2]

# Brief
This is a hobby project, to make a copy of HHKB made of wood,
but not limited to it. It is fully customizable, parameterized
toolchain to generate a keyboard case.

## Features
- Made of wood
- Nice curved shape
- Customizable layout and shape (compatible with <http://www.keyboard-layout-editor.com/>)
- Open bottom (it minimizes overall height and you can show off your beautiful PCB!)
- Compatible with most PCBs built with SMD components(?)

# Dependancies
- python3
- [python-shapely](https://pypi.python.org/pypi/Shapely)
- [Openscad](http://www.openscad.org/) - nightly version is recommended
- [OskarLinde/scad-utils](https://github.com/OskarLinde/scad-utils)
- [openscad/list-comprehension-demos](https://github.com/openscad/list-comprehension-demos)

# Build
Open `model/common.sacd` and modify parameters. You have to set `block_size`
properly even if you don't want to change anything. See
[Customization](#customization) section for details.

Following command will generate all 3D and 2D models you need, in
`stl` and `dxf` format, under `out` directory. After you excecute `make` 
successfuly, you can open `model/preview.scad` and see how it will look
like.

    git clone https://github.com/jinhwanlazy/wood-case-keyboard
    cd wood-case-keyboard
    make

In OSX, you have to specify full path of openscad.

    make SCAD=/Applications/OpenSCAD.app/Contents/MacOS/OpenSCAD

# Customization
## Layout
Layout definitions are located under `layout` directory. They are 
compatible with <http://www.keyboard-layout-editor.com/>. 
You can feed one of them like this.

    make clean
    make LAYOUT=layout/plank.layout

![layouts][layouts]

## Parameters
preparing...

# Instruction
I used a [Shapeoko1](https://www.shapeoko.com/shapeoko1.html) for milling
, and [PyCam](http://pycam.sourceforge.net/) to generate 
toolpaths. And it was painfull job.
I have spent a lot of time to properly calibrate machine but
still encountered number of hardware problems(slipping bits, burning wood, missing steps, etc). 
I had to manually edit gcodes generated by PyCam. sometimes I forgot to do it,
and it came back with disasters. Most of them are covered with sanding process,
but some were unreversible, especially, you can see a hole at bottom right corner of the
case in the first picture.
I had to make monkeypatchs everytime something goes wrong. 
I highly recommend you to use commercial grade toolchain or just talk with manufacturer. 
I'll leave here very brief steps I have made, rather than full instruction. 

0. I used 330 * 130 * 34mm walnut block.
1. Print `back_holder.stl` and `tilt_holder.stl` with 3D printer.
2. Fix wood block on CNC mill, and carve it with `base.stl`. I had to split it
two pieces, due to limitaion of build space. 
![ins2][ins2]
3. Fix a pair of `tilt_holder` with screw at bottom of the wood block.
![ins3][ins3]
4. Place wood block again, and cut it with `top_cutout.dxf`.
Cut depth is `lip_depth`mm from the highest point of the woodblock. It is
defined in `common.scad`.
The size of the model is arbitrary. Ignore the contour.
You have to cutout only pockets of the model.
The origin of the model is set to bottom leftmost key position.
![ins4][ins4]
5. Cut with `plate.dxf`. Again, ignore contour, cutout pockets. Cut down 6mm
   from the surface of previous cut.
![ins5][ins5]
6. Take off the block and fix it with `back_holder`, then cut it with
   `bottom_cutout.dxf`. Cut down until the thickness of top becomes 5mm.
![ins6][ins6]
![ins7][ins7]
7. Make a hole at back of the block. I did it manually with dremel.
8. Take off the result. Sand and finish it with oil stain and varnish.

[look0]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2556.JPG "look0"
[look1]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2566.JPG "look1"
[look2]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2569.JPG "look2"
[ins2]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2502.JPG "ins2"
[ins3]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2507.JPG "ins3"
[ins4]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2511.JPG "ins4"
[ins5]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2514.JPG "ins5"
[ins6]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2518.JPG "ins6"
[ins7]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/IMG_2519.JPG "ins7"
[layouts]: https://github.com/jinhwanlazy/wood-case-keyboard/raw/master/pics/layouts.png "layouts"

## Caveats
- The bottom surface is not flat. I started with flat wood block, but
  it distorted itself while milling.
- Open bottom may not a good idea in a long term. You always have to worry
  about conductive things on your desk.
- Layout support is quite limited at this point. It can parse only subset of
  [keyboard-layout-editor](http://www.keyboard-layout-editor.com/)'s syntax.
  Result maybe ugly with layouts other than 60% board.
- There seems to be errors in `base.stl` model. They are automatically fixed in most
  tools but it can be problametic in some cases. 
- You have to source PCB yourself unless you like [HHKB layout](https://github.com/jinhwanlazy/hhkb-pcb). 
- Note that the result on the pictures became smaller than 3D model.
  I had to cut it little more to hide my mistakes.
- There are some different types of [6u spacebar](https://deskthority.net/wiki/Space_bar_dimensions#6_units_.28114mm_wide.2C_3_keymounts.2C_57mm_and_38mm_apart.29).
  I hardcoded one of them in `model/plate.scad`. You have to manually modify it
  if you want something else.

